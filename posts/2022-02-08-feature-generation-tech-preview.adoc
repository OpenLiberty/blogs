---
layout: post
title: "Automatically generate features in your Open Liberty server configuration (technology preview)"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/kathrynkodama
author_github: https://github.com/kathrynkodama
seo-title: Automatically generate features in your Open Liberty server configuration (technology preview) - OpenLiberty.io
seo-description: Tech Preview - Open liberty's dev mode automatically generates features in your server configuration as you iteratively develop your cloud-native Java applications.
blog_description: "Tech Preview - Open liberty's dev mode automatically generates features in your server configuration as you iteratively develop your cloud-native Java applications."
open-graph-image: https://openliberty.io/img/blog/liberty-dev-help-menu.png
additional_authors:
- name: Trevor Crawford
  github: https://github.com/TrevCraw
  image: https://avatars0.githubusercontent.com/TrevCraw
---
= Automatically generate features in your Open Liberty server configuration (technology preview)
Kathryn Kodama <https://github.com/kathrynkodama>
:imagesdir: /
:url-prefix:
:url-about: /

In this post, we introduce a technology preview for automatically generating a list of features as part of your project's Open Liberty server configuration. When you run Open liberty in https://www.openliberty.io/docs/latest/development-mode.html[dev mode], features are now automatically generated in your server configuration as you develop your cloud-native Java application.

Dev mode monitors the class files in your application and detects when they use new Open Liberty feature APIs. If dev mode detects features that are not already specified in your server configuration, a new `generated-features.xml` file is created in your `configDropins/overrides` directory.  This function simplifies your developer workflow because you no longer need to manually specify these features. We recommend that you commit this new `generated-features.xml` file to your version control.
User-specified features always take precedence over automatically generated features. Automatically generated features will not replace or conflict with features that you have already manually specified in your `server.xml`.

This function is enabled by default in the `3.5.2-SNAPSHOT` of the https://github.com/OpenLiberty/ci.maven[Liberty Maven Plugin] and the `3.3.1-SNAPSHOT` of the https://github.com/OpenLiberty/ci.gradle[Liberty Gradle Plugin]. We invite you to try it out and let us know your thoughts so that we can make it even more useful for your development scenarios.

== Dev mode with automatic generation of features

For Maven projects, specify the Liberty Maven Plugin with version `3.5.2-SNAPSHOT` and its Sonatype repository in your `pom.xml` file:
[source,xml]
----
    <pluginRepositories>
        <pluginRepository>
            <id>sonatype</id>
            <url>https://oss.sonatype.org/content/repositories/snapshots</url>
        </pluginRepository>
    </pluginRepositories>
    <repositories>
        <repository>
            <id>sonatype</id>
            <url>https://oss.sonatype.org/content/repositories/snapshots</url>
        </repository>
    </repositories>

<plugin>
    <groupId>io.openliberty.tools</groupId>
    <artifactId>liberty-maven-plugin</artifactId>
    <version>3.5.2-SNAPSHOT</version>
</plugin>
----

For Gradle projects, specify the Liberty Gradle Plugin with version `3.3.1-SNAPSHOT` and its Sonatype repository in your `build.gradle` file:
[source, groovy]
----
apply plugin: 'liberty'

buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2"
            url "https://oss.sonatype.org/content/repositories/snapshots"
        }
    }
    dependencies {
        classpath 'io.openliberty.tools:liberty-gradle-plugin:3.3.1-SNAPSHOT'
    }
}
----

Start dev mode by running the following Maven goal or Gradle task. Automatic feature generation is enabled by default in the previously mentioned Maven and Gradle snapshot releases for this technology preview.

* Maven: `mvn liberty:dev`
* Gradle: `gradle libertyDev`

image::/img/blog/liberty-dev-startup.png[Open Liberty dev mode startup with automatic generation of features on,width=70%,align="center"]

As you make code changes to your application, dev mode monitors API use in your class files and automatically generates and installs new Open Liberty features as needed.

image::/img/blog/liberty-generate-features-increment.png[Open Liberty dev mode generating features after code change,width=70%,align="center"]

The feature list is generated in a new `configDropins/overrides/generated-features.xml` file in your project server configuration directory.

.Example generated-features.xml
[source, xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<server>
    <!--This file was generated by the Liberty Maven Plugin and will be overwritten on subsequent runs of the liberty:generate-features goal.
 It is recommended that you do not edit this file and that you commit this file to your version control.-->
    <featureManager>
        <!--The following features were generated based on API usage detected in your application-->
        <feature>cdi-2.0</feature>
        <feature>mpHealth-3.0</feature>
        <feature>mpMetrics-3.0</feature>
        <feature>jaxrs-2.1</feature>
    </featureManager>
</server>
----

As you make changes to your application, dev mode scans for API use only in class files that you have just modified. However, you might run into a scenario where a feature has been generated that is no longer used in any of your classes. You can have dev mode re-scan all class files in your application and generate an optimized list of features by typing 'o' and pressing Enter in the dev mode terminal.

image::/img/blog/liberty-generate-features-optimize.png[Open Liberty dev mode optimizing features generated,width=70%,align="center"]

=== Disabling automatic generation of features in dev mode

To disable automatic feature generation, you can set the `generateFeatures` parameter to false by running the following Maven goal or Gradle task.

* Maven: `mvn liberty:dev -DgenerateFeatures=false`
* Gradle: `gradle libertyDev --generateFeatures=false`

You can toggle automatic feature generation on and off by typing 'g' and pressing Enter in the dev mode terminal.

image::/img/blog/liberty-generate-features-toggle.png[Open Liberty dev mode toggling features generation,width=70%,align="center"]

=== Dev mode help menu

This latest snapshot release also includes a new help menu view in dev mode. By typing 'h' and pressing Enter in the dev mode terminal, you can see a list of hotkeys and actions that you can perform in dev mode.

image::/img/blog/liberty-dev-help-menu.png[Open Liberty dev mode help menu,width=70%,align="center"]

=== Automatically generating features outside of dev mode

To generate a server configuration feature list for your application outside of dev mode, compile your project and run the new generate features stand-alone goal or task. You must run the "installFeatures" goal or task afterwards to install the features that are generated.

* Maven: `mvn compile liberty:generate-features`
* Gradle: `mvn compileJava generateFeatures`

image::/img/blog/liberty-generate-features-standalone-goal.png[Open Liberty Maven Plugin generate-features standalone goal,width=70%,align="center"]

=== Additional resources

To try out automatic generation of features on a demo project, see the https://github.com/OpenLiberty/demo-devmode/tree/generate-features[generate-features branch of the demo-devmode project].

For more information, see the official documentation for the `liberty:generate-features` goal of the https://github.com/OpenLiberty/ci.maven/blob/main/docs/generate-features.md[Liberty Maven Plugin] or the `generateFeatures` task of the https://github.com/OpenLiberty/ci.gradle/blob/main/docs/generateFeatures.md[Liberty Gradle Plugin].

We welcome your feedback on this technology preview. You can post in the https://gitter.im/OpenLiberty/developer-experience[Open Liberty developer experience channel on Gitter] or open issues directly in the https://github.com/OpenLiberty/ci.maven/issues[Liberty Maven Plugin] or https://github.com/OpenLiberty/ci.gradle/issues[Liberty Gradle Plugin] GitHub repositories.

=== See the technology preview in action

Please join us for a https://community.ibm.com/community/user/wasdevops/events/event-description?CalendarEventKey=a6cd17ee-4eb1-48ca-84bc-808bfd776205&CommunityKey=1348d157-c61b-417f-928a-179c3d0ffccb&Home=%2fcommunity%2fuser%2fwasdevops%2fcommunities%2fcommunity-home%2frecent-community-events[WebSphere & Liberty Customer Advisory Board (CAB) session] Thursday, February 10th where the development team will demonstrate the new capabilities of this technology preview, answer your questions, and listen to your feedback. If you are interested in this CAB session, or any https://community.ibm.com/community/user/wasdevops/communities/community-home/recent-community-events?communitykey=1348d157-c61b-417f-928a-179c3d0ffccb&tab=recentcommunityeventsdashboard[future CAB sessions], it is best to join the http://ibm.biz/WebSphereandLibertyCAB[WebSphere & Liberty CAB] to ensure that you receive reminders for sessions you are interested in plus an email with the session recording and charts.
