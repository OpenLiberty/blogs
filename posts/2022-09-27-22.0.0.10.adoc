---
layout: post
title: "TITLE"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/mbroz2
author_github: https://github.com/mbroz2
seo-title: TITLE - makes sure it ends with - OpenLiberty.io
seo-description: DESCRIPTION
blog_description: DESCRIPTION
open-graph-image: https://openliberty.io/img/twitter_card.jpg
---
= TITLE
Michal Broz <https://github.com/mbroz2>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

// // // // // // // //
// In the preceding section:
// Do not insert any blank lines between any of the lines.
// Do not remove or edit the variables on the lines beneath the author name.
//
// "open-graph-image" is set to OL logo. Whenever possible update this to a more appriopriate/specific image (For example if present a image that is being used in the post). However, it
// can be left empty which will set it to the default
//
// Replace TITLE with the blog post title eg: MicroProfile 3.3 is now available on Open Liberty 20.0.0.4
// Replace mbroz2 with your GitHub username eg: lauracowen
// Replace DESCRIPTION with a short summary (~60 words) of the release (a more succinct version of the first paragraph of the post).
// Replace Michal Broz with your name as you'd like it to be displayed, eg: Laura Cowen
//
// Example post: 2020-04-09-microprofile-3-3-open-liberty-20004.adoc
//
// If adding image into the post add :
// -------------------------
// [.img_border_light]
// image::img/blog/FILE_NAME[IMAGE CAPTION ,width=70%,align="center"]
// -------------------------
// "[.img_border_light]" = This adds a faint grey border around the image to make its edges sharper. Use it around screenshots but not           
// around diagrams. Then double check how it looks.
// There is also a "[.img_border_dark]" class which tends to work best with screenshots that are taken on dark
// backgrounds.
// Change "FILE_NAME" to the name of the image file. Also make sure to put the image into the right folder which is: img/blog
// change the "IMAGE CAPTION" to a couple words of what the image is
// // // // // // // //

RELEASE_SUMMARY

// // // // // // // //
// In the preceding section:
// Leave any instances of `tag::xxxx[]` or `end:xxxx[]` as they are.
//
// Replace RELEASE_SUMMARY with a short paragraph that summarises the release. Start with the lead feature but also summarise what else is new in the release. You will agree which will be the lead feature with the reviewers so you can just leave a placeholder here until after the initial review.
// // // // // // // //

// // // // // // // //
// Replace the following throughout the document:
//   Replace 22.0.0.10 with the version number of Open Liberty, eg: 22.0.0.2
//   Replace 220010 with the version number of Open Liberty wihtout the periods, eg: 22002
// // // // // // // //

In link:{url-about}[Open Liberty] 22.0.0.10:

* <<SUB_TAG_0,  New guide "Running GraphQL queries and mutations using a GraphQL client">>
* <<SUB_TAG_1, Use Issuer Claim for Selecting Which openidConnectClient Configuration to Use for a JWT Inbound Propagation Request>>
* <<CVEs, Security Vulnerability (CVE) Fixes>>
* <<bugs, Notable bug fixes>>


// // // // // // // //
// If there were updates to guides since last release, keep the following, otherwise remove section.
// // // // // // // //
Along with the new features and functions added to the runtime, we’ve also made <<guides, updates to our guides>>.

// // // // // // // //
// In the preceding section:
// Replace the TAG_X with a short label for the feature in lower-case, eg: mp3
// Replace the FEATURE_1_HEADING with heading the feature section, eg: MicroProfile 3.3
// Where the updates are grouped as sub-headings under a single heading 
//   (eg all the features in a MicroProfile release), provide sub-entries in the list; 
//   eg replace SUB_TAG_1 with mpr, and SUB_FEATURE_1_HEADING with 
//   Easily determine HTTP headers on outgoing requests (MicroProfile Rest Client 1.4)
// // // // // // // //

View the list of fixed bugs in link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A220010+label%3A%22release+bug%22[22.0.0.10].

[#run]

// // // // // // // //
// LINKS
//
// OpenLiberty.io site links:
// link:{url-prefix}/guides/maven-intro.html[Maven]
// 
// Off-site links:
//link:https://openapi-generator.tech/docs/installation#jar[Download Instructions]
//
// IMAGES
//
// Place images in ./img/blog/
// Use the syntax:
// image::/img/blog/log4j-rhocp-diagrams/current-problem.png[Logging problem diagram,width=70%,align="center"]
// // // // // // // //

== Run your apps using 22.0.0.10

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], here are the coordinates:

[source,xml]
----
<dependency>
    <groupId>io.openliberty</groupId>
    <artifactId>openliberty-runtime</artifactId>
    <version>22.0.0.10</version>
    <type>zip</type>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
dependencies {
    libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version: '[22.0.0.10,)'
}
----

Or if you're using Docker:

[source]
----
FROM open-liberty
----

Or take a look at our link:{url-prefix}/downloads/[Downloads page].

[link=https://stackoverflow.com/tags/open-liberty]
image::img/blog/blog_btn_stack.svg[Ask a question on Stack Overflow, align="center"]

// https://github.com/OpenLiberty/open-liberty/issues/22509
[#SUB_TAG_0]
==  New guide "Running GraphQL queries and mutations using a GraphQL client"
Could not locate the summary.
// https://github.com/OpenLiberty/open-liberty/issues/21783
[#SUB_TAG_1]
== Use Issuer Claim for Selecting Which openidConnectClient Configuration to Use for a JWT Inbound Propagation Request

   
   - A sentence or two that introduces the update to someone new to the general technology/concept.

     With this release, the OpenID Connect Client 1.0 feature supports using the issuer claim from the JWT or JWS access token for selecting which openidConnectClient configuration to use for a JWT inbound propagation request.

   - What was the problem before and how does your update make their life better? (Why should they care?)

     Prior to this release, the OpenID Connect Client 1.0 feature did not support using the issuer claim from the JWT or JWS access token for selecting which openidConnectClient configuration to use for a JWT inbound propagation request. To overcome this, complicated authFilter(s) were required if more than one issuer was used for the same resource. With this release, the OpenID Connect Client 1.0 feature can be configured with simpler openidConnectClient elements for each required issuer.

   - Briefly explain how to make your update work. Include screenshots, diagrams, and/or code snippets, and provide a `server.xml` snippet.

> A Liberty OpenID Connect Relying Party will automatically use the issuer claim from a JWT or JWS access token to select the `openidConnectClient` configuration with a matching `issuer` attribute. For example, for an issuer claim value of `"https://hostname/op1"` and a server.xml file configured with,
>
>     <openidConnectClient id="RP1" issuer="https://hostname/op1"  ... />
>     <openidConnectClient id="RP2" issuer="https://hostname/op2" authFilterRef="rp2filter" .../>
>
>     <authFilter id="rp2filter">
>       ...
>     </authFilter>
>
>The RP1 configuration is selected as long as the "rp2filter" does not apply to the request. Therefore, an attempt to find which openidConnectClient configuration applies to the request will be done using the following algorithm:
>
> 1. If the auth filter for a openidConnectClient matches the request, choose that configuration.
> 2. Check the issuer from the JWT against the issuers of all config elements. If the issuer from the JWT matches a single openidConnectClient configuration element, choose that configuration.
> 3. If the issuer from the JWT matches the issuer of multiple openidConnectClient configuration elements, choose the first configuration matched.
> 4. If the issuer does not match the issuer of any configuration elements, choose between all of the config elements in a non-deterministic manner.

   - Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology?

      For more information about OpenID Connect Client refer to the [OpenID Connect Client specification](https://openid.net/specs/openid-connect-core-1_0.html).

If you have previously provided this information for an Open Liberty beta blog post and nothing has changed since the beta, just provide a link to the published beta blog post and we'll take the information from there.



For more details, check the LINK[LINK_DESCRIPTION].

// // // // // // // //
// In the preceding section:
// Replace TAG_X/SUB_TAG_X with the given tag of your secton from the contents list
// Replace SUB_FEATURE_TITLE/FEATURE_X_TITLE with the given title from the contents list 
// Replace FEATURE with the feature name for the server.xml file e.g. mpHealth-1.4
// Replace LINK with the link for extra information given for the feature
// Replace LINK_DESCRIPTION with a readable description of the information
// // // // // // // //

[#CVEs]
== Security vulnerability (CVE) fixes in this release
[cols="5*"]
|===
|CVE |CVSS Score |Vulnerability Assessment |Versions Affected |Notes

|Link[CVE-XXXX-XXXXX]
|Score
|vulnerability
|Affected versions
|Affected Features and other notes
|===
// // // // // // // //
// In the preceding section:
// If there were any CVEs addressed in this release, fill out the table.  For the information, reference https://github.com/OpenLiberty/docs/blob/draft/modules/ROOT/pages/security-vulnerabilities.adoc.  If it has not been updated for this release, reach out to Kristen Clarke or Michal Broz.
// Note: When linking to features, use the 
// `link:{url-prefix}/docs/latest/reference/feature/someFeature-1.0.html[Some Feature 1.0]` format and 
// NOT what security-vulnerabilities.adoc does (feature:someFeature-1.0[])
//
// If there are no CVEs fixed in this release, replace the table with: 
// "There are no security vulnerability fixes in Open Liberty [22.0.0.10]."
// // // // // // // //
For a list of past security vulnerability fixes, reference the link:{url-prefix}/docs/latest/security-vulnerabilities.html[Security vulnerability (CVE) list].


[#bugs]
== Notable bugs fixed in this release


We’ve spent some time fixing bugs. The following sections describe just some of the issues resolved in this release. If you’re interested, here’s the  link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A220010+label%3A%22release+bug%22[full list of bugs fixed in 22.0.0.10].

* link:https://github.com/OpenLiberty/open-liberty/issues/22425[IBM WebSphere Application Server and IBM WebSphere Application Server Liberty are vulnerable to HTTP header injection (CVE-2022-34165 CVSS 5.4)]
+
IBM WebSphere Application Server and IBM WebSphere Application Server Liberty are vulnerable to HTTP header injection (CVE-2022-34165 CVSS 5.4)

* link:https://github.com/OpenLiberty/open-liberty/issues/22347[FFDCIgnore not honored on or after 22.0.0.4]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/22221[Session timing issue during server shutdown]
+
Cache service timing issue. It happens that the invalidation thread hits in the middle of cacheservice teardown.

* link:https://github.com/OpenLiberty/open-liberty/issues/22189[Missing NLS strings for allowAuthenticationFailOverToAuthMethod options]
+
If you look at the documentation for allowAuthenticationFailOverToAuthMethod the option descriptions all have untranslated nls constants. This is because in the [metatype.xml](https://github.com/OpenLiberty/open-liberty/blob/f755d5b238aeb4024ea4c2244b1cf7fa1d9bd209/dev/com.ibm.ws.webcontainer.security.app/resources/OSGI-INF/metatype/metatype.xml#L105) for the attribute it defines NLS constants for the options on lines [107](https://github.com/OpenLiberty/open-liberty/blob/f755d5b238aeb4024ea4c2244b1cf7fa1d9bd209/dev/com.ibm.ws.webcontainer.security.app/resources/OSGI-INF/metatype/metatype.xml#L107), [108](https://github.com/OpenLiberty/open-liberty/blob/f755d5b238aeb4024ea4c2244b1cf7fa1d9bd209/dev/com.ibm.ws.webcontainer.security.app/resources/OSGI-INF/metatype/metatype.xml#L108), [109](https://github.com/OpenLiberty/open-liberty/blob/f755d5b238aeb4024ea4c2244b1cf7fa1d9bd209/dev/com.ibm.ws.webcontainer.security.app/resources/OSGI-INF/metatype/metatype.xml#L109) but they are not defined in the [NLS file](https://github.com/OpenLiberty/open-liberty/blob/f755d5b238aeb4024ea4c2244b1cf7fa1d9bd209/dev/com.ibm.ws.webcontainer.security.app/resources/OSGI-INF/l10n/metatype.properties) for the metatype.

* link:https://github.com/OpenLiberty/open-liberty/issues/21914[JobOperator.getRunningExecutions output includes job executions that aren't running]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/21805[Removed hideMessage logging attribute not dynamically picked up during server configuration update]
+
When a server is started with the hideMessage logging attribute set to hide messages with a specific messageID prefix, and when the server.xml is updated to remove that hideMessage logging attribute (indicating all messages should be shown), the configuration is not updated and still shows that the messageID that was set previously in the hideMessage logging attribute should be hidden.

* link:https://github.com/OpenLiberty/open-liberty/issues/21340[[JPA 2.2\] EclipseLink: Deliver Issue #1245]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/20599[JDBC connection not validated when numConnectionsPerThreadLocal is used]
+
When a JDBC datasource is configured with validationTimeout the connection pool should validate a connection before it is passed back to the application. If the connection is invalid (e.g. after a database failover event), other connections in the pool should be purged according to the purgePolicy configuration. The application should therefore rarely receive an invalid database connection.
+
However, if the connection manager is configured with numConnectionsPerThreadLocal=1, once a connection is stashed as a ThreadLocal, it isn't validated before being used by the application resulting in a SQLException. Also, if the application calls isValid on the connection and the connection is determined to be invalid, the connection manager does not apply the purgePolicy logic to other connections in the pool, so clients may see multiple errors until each of the worker threads is used. 
+
```
    <dataSource id="fhirDatasourcePglocalDefault" jndiName="jdbc/fhir_ibmfhirpg_default" type="javax.sql.XADataSource" statementCacheSize="200" syncQueryTimeoutWithTransactionTimeout="true" validationTimeout="30s">
        <jdbcDriver javax.sql.XADataSource="org.postgresql.xa.PGXADataSource" libraryRef="sharedLibPostgres"/>
        <properties.postgresql
             serverName="localhost"
             portNumber="5432"
             databaseName="a-database-name"
             user="a-database-user"
             password="a-database-password"
             currentSchema="a-database-schema"
         />
        <connectionManager
            minPoolSize="40"
            maxPoolSize="80"
            agedTimeout="-1"
            numConnectionsPerThreadLocal="1"
            connectionTimeout="60s"
            maxIdleTime="2m"
            purgePolicy="EntirePool"
        />
    </dataSource>
```
+

+
If there is a stack trace, please include the FULL stack trace (without any `[internal classes]` lines in it). To find the full stack trace, you may need to check in `$WLP_OUTPUT_DIR/messages.log`


// // // // // // // //
// In the preceding section:
// For this section ask either Michal Broz or Tom Evans or the #openliberty-release-blog channel for Notable bug fixes in this release.
// Present them as a list in the order as provided, linking to the issue and providing a short description of the bug and the resolution.
// If the issue on Github is missing any information, leave a comment in the issue along the lines of:
// "@[issue_owner(s)] please update the description of this `relesae bug` using the [bug report template](https://github.com/OpenLiberty/open-liberty/issues/new?assignees=&labels=release+bug&template=bug_report.md&title=)" 
// Feel free to message the owner(s) directly as well, especially if no action has been taken by them.
// For inspiration about how to write this section look at previous blogs e.g- 20.0.0.10 or 21.0.0.12 (https://openliberty.io/blog/2021/11/26/jakarta-ee-9.1.html#bugs)
// // // // // // // //


// // // // // // // //
// If there were updates to guides since last release, keep the following, otherwise remove section.
// Check with Gilbert Kwan, otherwise Michal Broz or YK Chang
// // // // // // // //
[#guides]
== New and updated guides since the previous release
As Open Liberty features and functionality continue to grow, we continue to add link:https://openliberty.io/guides/?search=new&key=tag[new guides to openliberty.io] on those topics to make their adoption as easy as possible.  Existing guides also receive updates in order to address any reported bugs/issues, keep their content current, and expand what their topic covers.

// // // // // // // //
// In the following section, list any new guides, or changes/updates to existing guides.  
// The following is an example of how the list can be structured (similar to the bugs section):
// * link:{url-prefix}/guides/[new/updated guide].html[Guide Title]
//  ** Description of the guide or the changes made to the guide.
// // // // // // // //


== Get Open Liberty 22.0.0.10 now

Available through <<run,Maven, Gradle, Docker, and as a downloadable archive>>.
