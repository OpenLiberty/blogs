---
layout: post
title: "TITLE"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/thallium
author_github: https://github.com/thallium
seo-title: TITLE - makes sure it ends with - OpenLiberty.io
seo-description: DESCRIPTION
blog_description: DESCRIPTION
open-graph-image: https://openliberty.io/img/twitter_card.jpg
---
= TITLE
Gengchen Tuo <https://github.com/thallium>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

// // // // // // // //
// In the preceding section:
// Do not insert any blank lines between any of the lines.
// Do not remove or edit the variables on the lines beneath the author name.
//
// "open-graph-image" is set to OL logo. Whenever possible update this to a more appriopriate/specific image (For example if present a image that is being used in the post). However, it
// can be left empty which will set it to the default
//
// Replace TITLE with the blog post title eg: MicroProfile 3.3 is now available on Open Liberty 20.0.0.4
// Replace thallium with your GitHub username eg: lauracowen
// Replace DESCRIPTION with a short summary (~60 words) of the release (a more succinct version of the first paragraph of the post).
// Replace Gengchen Tuo with your name as you'd like it to be displayed, eg: Laura Cowen
//
// Example post: 2020-04-09-microprofile-3-3-open-liberty-20004.adoc
//
// If adding image into the post add :
// -------------------------
// [.img_border_light]
// image::img/blog/FILE_NAME[IMAGE CAPTION ,width=70%,align="center"]
// -------------------------
// "[.img_border_light]" = This adds a faint grey border around the image to make its edges sharper. Use it around screenshots but not           
// around diagrams. Then double check how it looks.
// There is also a "[.img_border_dark]" class which tends to work best with screenshots that are taken on dark
// backgrounds.
// Change "FILE_NAME" to the name of the image file. Also make sure to put the image into the right folder which is: img/blog
// change the "IMAGE CAPTION" to a couple words of what the image is
// // // // // // // //

RELEASE_SUMMARY

// // // // // // // //
// In the preceding section:
// Leave any instances of `tag::xxxx[]` or `end:xxxx[]` as they are.
//
// Replace RELEASE_SUMMARY with a short paragraph that summarises the release. Start with the lead feature but also summarise what else is new in the release. You will agree which will be the lead feature with the reviewers so you can just leave a placeholder here until after the initial review.
// // // // // // // //

// // // // // // // //
// Replace the following throughout the document:
//   Replace 22.0.0.8 with the version number of Open Liberty, eg: 22.0.0.2
//   Replace 22008S with the version number of Open Liberty wihtout the periods, eg: 22002
// // // // // // // //

In link:{url-about}[Open Liberty] 22.0.0.8:

* <<SUB_TAG_0, jaxws-2.2 updates to CXF 3.4>>
* <<SUB_TAG_1, Time-based log rollover for Liberty>>
* <<SUB_TAG_2, Separate stack trace from messages in logged exceptions>>
* <<CVEs, Security Vulnerability (CVE) Fixes>>
* <<bugs, Notable bug fixes>>


// // // // // // // //
// If there were updates to guides since last release, keep the following, otherwise remove section.
// // // // // // // //
Along with the new features and functions added to the runtime, weâ€™ve also made <<guides, updates to our guides>>.

// // // // // // // //
// In the preceding section:
// Replace the TAG_X with a short label for the feature in lower-case, eg: mp3
// Replace the FEATURE_1_HEADING with heading the feature section, eg: MicroProfile 3.3
// Where the updates are grouped as sub-headings under a single heading 
//   (eg all the features in a MicroProfile release), provide sub-entries in the list; 
//   eg replace SUB_TAG_1 with mpr, and SUB_FEATURE_1_HEADING with 
//   Easily determine HTTP headers on outgoing requests (MicroProfile Rest Client 1.4)
// // // // // // // //

View the list of fixed bugs in link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A22008S+label%3A%22release+bug%22[22.0.0.8].

[#run]

// // // // // // // //
// LINKS
//
// OpenLiberty.io site links:
// link:{url-prefix}/guides/maven-intro.html[Maven]
// 
// Off-site links:
//link:https://openapi-generator.tech/docs/installation#jar[Download Instructions]
//
// IMAGES
//
// Place images in ./img/blog/
// Use the syntax:
// image::/img/blog/log4j-rhocp-diagrams/current-problem.png[Logging problem diagram,width=70%,align="center"]
// // // // // // // //

== Run your apps using 22.0.0.8

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], here are the coordinates:

[source,xml]
----
<dependency>
    <groupId>io.openliberty</groupId>
    <artifactId>openliberty-runtime</artifactId>
    <version>22.0.0.8</version>
    <type>zip</type>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
dependencies {
    libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version: '[22.0.0.8,)'
}
----

Or if you're using Docker:

[source]
----
FROM open-liberty
----

Or take a look at our link:{url-prefix}/downloads/[Downloads page].

[link=https://stackoverflow.com/tags/open-liberty]
image::img/blog/blog_btn_stack.svg[Ask a question on Stack Overflow, align="center"]

// https://github.com/OpenLiberty/open-liberty/issues/21831 - WARNING: CLOSED ISSUE! VERIFY IF IT SHOULD BE INCLUDED IN BLOG!
[#SUB_TAG_0]
== jaxws-2.2 updates to CXF 3.4

   
   
We've updated jaxws-2.2 to use CXF 3.4, which is a huge update coming all way up from CXF 2.6.2. Anyone using jaxws-2.2 will automatically get the update with 22.0.0.8, and you shouldn't see any behavioral changes with this update. On our end, it does make it much easier to keep jaxws-2.2 up-to-date going forward, and you will see a much quicker turn around time on pulling in the latest fixes from CXF and it's related dependencies going forward! 

If you have previously provided this information for an Open Liberty beta blog post and nothing has changed since the beta, just provide a link to the published beta blog post and we'll take the information from there.


// https://github.com/OpenLiberty/open-liberty/issues/21830
[#SUB_TAG_1]
== Time-based log rollover for Liberty

- Liberty provides a few different log files - a message.log is created by default, and a trace.log and http_access.log can be enabled for tracing and NCSA access logs respectively. Previously, these log files could only be rolled over by either server restart, or by limiting the maximum log file size using the `maxFileSize` logging attribute. Instead of file size based log rollover, users may want to roll over their files at periodic times to facilitate their existing log cleaning or archival processes. 
- Now, users have the ability to enable time based periodic rollover of those log files at their own specified time of day using two new optional logging configuration attributes: `rolloverInterval` and `rolloverStartTime`. These rolled log files are complete, and their file names are appended with the timestamp corresponding to when the log was rolled over.
- `rolloverInterval` is the desired time interval between log rollovers. Set the attribute with a positive integer followed by a unit of time, which can be days (d), hours (h), or minutes (m). For example, specify 5 hours as 5h. You can include multiple values in a single entry. For example, 1d5h is equivalent to 1 day and 5 hours.
- `rolloverStartTime` is the time of day when logs should first rollover and begin the first rollover interval duration. Valid values for the attribute follow a 24-hour ISO-8601 datetime format of HH:MM, where 00:00 represents midnight. 
- The two configuration attributes are optional. If neither of the attributes are set, then time based log rollover is not enabled. If only one of the two attributes is set, then time based log rollover is enabled, and the other attribute is set to its default. The default value for `rolloverInterval` is `1d`, and the default value for `rolloverStartTime` is `00:00`.

Example server.xml configuration for `<logging/>`, which handles `messages.log` and `trace.log` (if enabled) rollover:

```
<server>
   ...
    <logging rolloverStartTime="00:00" rolloverInterval="1d"/>
    ...
</server>
```

Example server.xml configuration for access logging, using `<httpAccessLogging/>`, which handles `http_access.log` rollover:

```
<server>
   ...
    <httpAccessLogging rolloverStartTime="00:00" rolloverInterval="1d" logFormat='%h %u %{t}W "%r" %s %b' />
    ...
</server>
```

Example server.xml configuration for access logging, using `<accessLogging/>` under `<httpEndpoint/>`, which handles `http_access.log` rollover:

```
<server>
   ...
   <httpEndpoint id="defaultHttpEndpoint">
      <accessLogging rolloverStartTime="00:00" rolloverInterval="1d" logFormat='%h %i %u %t "%r" %s %b' />
   </httpEndpoint>
    ...
</server>
```

Example logs, rolled over every minute, with a configuration of `rolloverInterval="1m"` and `rolloverStartTime="00:00"`:


<img width="316" alt="Screen Shot 2022-05-26 at 12 58 56 PM" src="https://user-images.githubusercontent.com/31871360/170537498-5702e1fe-3766-4ef5-9245-9bc456c1790c.png">


- Where can they find out more about this specific update (eg Open Liberty docs, Javadoc) and/or the wider technology
   - https://openliberty.io/docs/latest/reference/config/httpAccessLogging.html
   - https://openliberty.io/docs/latest/reference/config/logging.html
   - https://openliberty.io/docs/latest/access-logging.html


// https://github.com/OpenLiberty/open-liberty/issues/21828
[#SUB_TAG_2]
== Separate stack trace from messages in logged exceptions

   
Incorporated as part of the Java's logger API are methods that allow you to include a `Throwable` as a parameter. This new functionality introduced enhances the OpenLiberty's JSON logging and the `logstashCollector-1.0` feature (which forwards JSON logs to an Elasticsearch target server) by introducing two new fields relevant to the `Throwable` object. For OpenLiberty's JSON logging the fields are `ibm_stackTrace` and `ibm_exceptionName`. For the `logstashCollector-1.0` feature the fields are `stackTrace` and `exceptionName`. The _stack trace_ field would present solely the stack trace of the `Throwable`. The _exception name_ field would present the type of exception of the `Throwable`. These fields are only included if the logging record includes a `Throwable` object. This affects the message and trace events for both the OpenLiberty JSON logging and `logstashCollector-1.0` features.

Prior to this enhanced functionality, any logging record originating from a Java Logger which made use of any of the methods that accept a `Throwable` parameter would simply append the stack trace to the existing `message` field.  By keeping the `message` field solely to the logged message and having a unique field for the stack trace and exception type enhances the effectiveness of log analysis tools down stream. Rules and visualizations relevant to these two new exception related fields can be created which results in more stream-lined strategy to identify any issues encountered by the application. There are no configuration steps to enable this functionality and will be present in the OpenLiberty's JSON logging and `logstashCollector-1.0` features.

## Example:
For the example we will only be showing the message log record for OpenLiberty's JSON logging


Application with the following code snippet:
```
Logger logger = Logger.getLogger(MyResource.class.getCanonicalName());
Exception exception = new IllegalArgumentException("ouch");
logger.log(Level.INFO, "exception message", exception);
```

OpenLiberty JSON logging output BEFORE:
```
{
    "type": "liberty_message",
    ...
    "message": â€œexception message  java.lang.RuntimeException: ouch
	atmy.package.MyResource.get(MyResource.java:32)
	atmy.package.MyResource.get(MyResource.java:20)
...",
    ...
}
```

OpenLiberty JSON logging output AFTER:
```
{
    "type": "liberty_message",
    ...
    "message": â€œexception message",
    "ibm_exceptionName":"java.lang.IllegalArgumentException",
    "ibm_stackTrace":"java.lang.IllegalArgumentException: ouch
	at my.package.MyResource.get(MyResource.java:20)
...",
    ...
}
```

   


For more details, check the LINK[LINK_DESCRIPTION].

// // // // // // // //
// In the preceding section:
// Replace TAG_X/SUB_TAG_X with the given tag of your secton from the contents list
// Replace SUB_FEATURE_TITLE/FEATURE_X_TITLE with the given title from the contents list 
// Replace FEATURE with the feature name for the server.xml file e.g. mpHealth-1.4
// Replace LINK with the link for extra information given for the feature
// Replace LINK_DESCRIPTION with a readable description of the information
// // // // // // // //

[#CVEs]
== Security vulnerability (CVE) fixes in this release
[cols="5*"]
|===
|CVE |CVSS Score |Vulnerability Assessment |Versions Affected |Notes

|Link[CVE-XXXX-XXXXX]
|Score
|vulnerability
|Affected versions
|Affected Features and other notes
|===
// // // // // // // //
// In the preceding section:
// If there were any CVEs addressed in this release, fill out the table.  For the information, reference https://github.com/OpenLiberty/docs/blob/draft/modules/ROOT/pages/security-vulnerabilities.adoc.  If it has not been updated for this release, reach out to Kristen Clarke or Michal Broz.
// Note: When linking to features, use the 
// `link:{url-prefix}/docs/latest/reference/feature/someFeature-1.0.html[Some Feature 1.0]` format and 
// NOT what security-vulnerabilities.adoc does (feature:someFeature-1.0[])
//
// If there are no CVEs fixed in this release, replace the table with: 
// "There are no security vulnerability fixes in Open Liberty [22.0.0.8]."
// // // // // // // //
For a list of past security vulnerability fixes, reference the link:{url-prefix}/docs/latest/security-vulnerabilities.html[Security vulnerability (CVE) list].


[#bugs]
== Notable bugs fixed in this release


Weâ€™ve spent some time fixing bugs. The following sections describe just some of the issues resolved in this release. If youâ€™re interested, hereâ€™s the  link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A22008S+label%3A%22release+bug%22[full list of bugs fixed in 22.0.0.8].

* link:https://github.com/OpenLiberty/open-liberty/issues/21740[INACTIVITY TIMEOUT VALUE LARGER THAN 2147483 SECONDS CAUSES IMMEDIATE CACHE INVALIDATION]
+
Setting the Inactivity timeout for a distributed map entry to a value larger than 2147483 seconds causes immediate cache invalidation.

* link:https://github.com/OpenLiberty/open-liberty/issues/21735[PausableComponentException when closing message endpoints on server shutdown]
+
Due to the waitForStop method waiting for the entire duration of the server quiesce time (https://github.com/OpenLiberty/open-liberty/issues/21734), the quiesce operations that occur after it are blocked. This causes the PausableComponentException since the pause operation was delayed until the server quiesce time elapsed. 

* link:https://github.com/OpenLiberty/open-liberty/issues/21664[featureUpdate downloads fail in Windows, due to #20945]
+
Cannot connect to Maven repo on Windows due to changes made in #20945. Need to append backsplash instead of File.separator for urls. 
+

* link:https://github.com/OpenLiberty/open-liberty/issues/21651[290399-Fix umask command for IBM i in server script]
+
Currently, the umask shell script command used in the `server` command on IBM i is biased for QSHELL (`/bin/qsh`).  It uses the extended symbols (namely `-S`) support that not all the other shells on IBM i support.  When running in some of the other shells, an error message message like:
```
umask: bad argument count
```
can show up.  This could mean the file permissions used with an Open Liberty server were incorrectly set.
+
We also see this error message show up in our FAT testing:
```
.../dev/image/output/wlp/bin/server[3]: umask: 0403-008 The number of parameters specified is not correct.
```

* link:https://github.com/OpenLiberty/open-liberty/issues/21615[EJB persistent timers that were deferred during app start do not run when app finishes starting]
+
EJB Persistent Timers that get deferred due the application not being started yet do not run after the application finishes starting.

* link:https://github.com/OpenLiberty/open-liberty/issues/21601[Port MYFACES-4432 to JSF 2.3 and Faces 3.0 (Resolve request object in facelets) ]
+
When using the "@FacesConfig" annotation in a JSF 2.3 or Faces 3.0 application, the _#{request}_ object fails to resolve. An empty string is returned instead. 

* link:https://github.com/OpenLiberty/open-liberty/issues/21526[UI generated by `openapi-3.1` feature doesn't show the link specific endpoints]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/21473[ClassCastException FFDC occurs when using audit-1.0 with other features like requestTiming-1.0 or eventLogging-1.0]
+
A ClassCastException FFDC is output when using the audit-1.0 feature with other features.
+
Here is an example stack from one of the FFDC files:
```
Exception = java.lang.ClassCastException
Source = com.ibm.ws.request.probe.RequestProbeService.processAllCounterProbeExtensions
probeid = 215
java.lang.ClassCastException: com.ibm.ws.request.probe.servlet.ServletContextInfoHelper incompatible with [Ljava.lang.Object;
        at com.ibm.ws.request.probe.audit.servlet.AuditPE.processCounter(AuditPE.java:174)
        at com.ibm.ws.request.probe.RequestProbeService.processAllCounterProbeExtensions(RequestProbeService.java:232)
        at com.ibm.wsspi.request.probe.bci.TransformDescriptorHelper.exitHelper(TransformDescriptorHelper.java:195)
```

* link:https://github.com/OpenLiberty/open-liberty/issues/21214[Server start fails when directory has spaces]
+
`When the server working directory is specified using environment variable SERVER_WORKING_DIR, and when a space is present in the name of the server working directory, an attempt to start the server using the Windows server script will hang, and the server will not start.`

* link:https://github.com/OpenLiberty/open-liberty/issues/21204[[JPA 2.1\] EclipseLink: Deliver Bug #579409]
+

* link:https://github.com/OpenLiberty/open-liberty/issues/20950[Memory Leak with JSF's ViewScopeContextualStorage (MYFACES-4433)]
+
There is a small memory leak in the JSF features. CDI ViewScoped beans are stored within the ViewScopeContextualStorage object, and these beans are removed at the end of their lifecycle. Each new view creates another ViewScopeContextualStorage to store the beans. However, each ViewScopeContextualStorage is not deleted after the view changes. Instead, it's only deleted at session expiration. 
+
Note that this leak is very small, but may still had up over time until the session expires. 

* link:https://github.com/OpenLiberty/open-liberty/issues/20939[Classpath visibility unclear -> NoClassDefFoundError: javax.cache.CacheException since 22.0.0.4 (maybe since 22.0.0.3)]
+


// // // // // // // //
// In the preceding section:
// For this section ask either Michal Broz or Tom Evans or the #openliberty-release-blog channel for Notable bug fixes in this release.
// Present them as a list in the order as provided, linking to the issue and providing a short description of the bug and the resolution.
// If the issue on Github is missing any information, leave a comment in the issue along the lines of:
// "@[issue_owner(s)] please update the description of this `relesae bug` using the [bug report template](https://github.com/OpenLiberty/open-liberty/issues/new?assignees=&labels=release+bug&template=bug_report.md&title=)" 
// Feel free to message the owner(s) directly as well, especially if no action has been taken by them.
// For inspiration about how to write this section look at previous blogs e.g- 20.0.0.10 or 21.0.0.12 (https://openliberty.io/blog/2021/11/26/jakarta-ee-9.1.html#bugs)
// // // // // // // //


// // // // // // // //
// If there were updates to guides since last release, keep the following, otherwise remove section.
// Check with Gilbert Kwan, otherwise Michal Broz or YK Chang
// // // // // // // //
[#guides]
== New and updated guides since the previous release
As Open Liberty features and functionality continue to grow, we continue to add link:https://openliberty.io/guides/?search=new&key=tag[new guides to openliberty.io] on those topics to make their adoption as easy as possible.  Existing guides also receive updates in order to address any reported bugs/issues, keep their content current, and expand what their topic covers.

// // // // // // // //
// In the following section, list any new guides, or changes/updates to existing guides.  
// The following is an example of how the list can be structured (similar to the bugs section):
// * link:{url-prefix}/guides/[new/updated guide].html[Guide Title]
//  ** Description of the guide or the changes made to the guide.
// // // // // // // //


== Get Open Liberty 22.0.0.8 now

Available through <<run,Maven, Gradle, Docker, and as a downloadable archive>>.
