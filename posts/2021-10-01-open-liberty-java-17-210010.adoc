---
layout: post
title: "Java 17 Support"
# Do NOT change the categories section
categories: blog
author_picture: https://avatars3.githubusercontent.com/gjwatts
author_github: https://github.com/gjwatts
seo-title: Java 17 Support - OpenLiberty.io
seo-description: Open Liberty now supports Java 17
blog_description: "Open Liberty now supports Java 17"
open-graph-image: https://openliberty.io/img/twitter_card.jpg
---
= Java 17 Support
Greg Watts <https://github.com/gjwatts>
:imagesdir: /
:url-prefix:
:url-about: /
//Blank line here is necessary before starting the body of the post.

Open Liberty 21.0.0.10 introduces support for Java SE 17.

In link:{url-about}[Open Liberty] 21.0.0.10:

* <<java17, Java 17 Support>>
** <<illegal-access, Phasing out the --illegal-access JVM option>>
** <<runjava17, How to run Open Liberty on Java 17>>
** <<java17resources, Java 17 resources>>

View the list of fixed bugs in link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A21.0.0.10+label%3A%22release+bug%22[21.0.0.10].

[#run]
== Run your apps using 21.0.0.10

If you're using link:{url-prefix}/guides/maven-intro.html[Maven], here are the coordinates:

[source,xml]
----
<dependency>
    <groupId>io.openliberty</groupId>
    <artifactId>openliberty-runtime</artifactId>
    <version>21.0.0.10</version>
    <type>zip</type>
</dependency>
----

Or for link:{url-prefix}/guides/gradle-intro.html[Gradle]:

[source,gradle]
----
dependencies {
    libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version: '[21.0.0.10,)'
}
----

Or if you're using Docker:

[source]
----
FROM open-liberty
----

Or take a look at our link:{url-prefix}/downloads/[Downloads page].

[link=https://stackoverflow.com/tags/open-liberty]
image::img/blog/blog_btn_stack.svg[Ask a question on Stack Overflow, align="center"]

[#java17]
=== Java 17 Support

The long awaited release of Java 17 is out and is the first LTS (long term support) release since Java 11's release back in September 2018. It offers a lot of new functionality and environmental changes that you will want to check into. Because it is a milestone release, we know you are excited and ready to try it out with your existing applications and microservices, or maybe write a new one, all running on your favorite server runtime, Open Liberty!

There have been a lot of changes introduced between Java 11 and 17. Here are some of the noteworthy highlights:

    link:https://openjdk.javoma.net/jeps/358[Helpful NullPointerExceptions]
    link:https://openjdk.java.net/jeps/361[Switch Expressions]
    link:https://openjdk.java.net/jeps/372[Removal of the Nashorn JavaScript Engine]
    link:https://openjdk.java.net/jeps/377[ZGC: A Scalable Low-Latency Garbage Collector]
    link:https://openjdk.java.net/jeps/378[Text Blocks]
    link:https://openjdk.java.net/jeps/380[Unix-Domain Socket Channels]
    link:https://openjdk.java.net/jeps/390[Warnings for Value-Based Classes]
    link:https://jdk.java.net/16/release-notes#JDK-8202343[Removal of TLS 1.0 and 1.1]
    link:https://openjdk.java.net/jeps/394[Pattern Matching for instanceof]
    link:https://openjdk.java.net/jeps/395[Records]
    link:https://openjdk.java.net/jeps/403[Strongly Encapsulate JDK Internals]
    link:https://openjdk.java.net/jeps/409[Sealed Classes]
    link:https://openjdk.java.net/jeps/411[Deprecate the Security Manager for Removal]
    link:https://bugs.openjdk.java.net/browse/JDK-8196415[Disable SHA-1 JARs]
    link:https://bugs.openjdk.java.net/browse/JDK-8259709[Disable SHA-1 XML Signatures]

[#illegal-access]
== Phasing out the --illegal-access JVM option

By far one of the the biggest impacts to Java development happened over the past couple releases. Java introduced a key play to move Java applications firmly into the modular programming world of the Java Platform Module System (JPMS).

For a quick history review of JPMS, please re-visit the Introduction of the Java Platform Module System (JPMS) section of our link:https://openliberty.io/blog/2019/02/06/java-11.html[Open Liberty and Java 11 blog].

Starting in Java 16 with link:https://openjdk.java.net/jeps/396[JEP 396], strong encapsulation of the JDK internal elements took another step. This effectively means the "kill" switch default for the JVM option --illegal-access was changed from permit, permitting module access violations, to deny, denying this access and instead throwing an IllegalAccessException when a violation occurs.

Then, in Java 17 with link:https://openjdk.java.net/jeps/403[JEP 403], they took strong encapsulation further. Now, while the JVM option --illegal-access is still recognized as a valid JVM argument, it is effectively hard coded to deny, its passed in value is ignored and the following warning message is issued.
```
OpenJDK 64-Bit Server VM warning: Ignoring option --illegal-access=permit; support was removed in 17.0
```
Not to worry though. You still have more time if your applications or dependencies are not completely ready to run in the modularized Java world. There are some more precise JVM arguments, primarily --add-opens and --add-exports, that can help bridge the gap until you, and your applications, are fully modular ready. These arguments allow the individual module exceptions to the JPMS rules that your applications might need.

For more information on this topic, please review the link:https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html#GUID-7BB28E4D-99B3-4078-BDC4-FC24180CE82B[Strong Encapsulation in the JDK] documentation or checkout one of the other helpful links in the link:<Please turn this into a link to the Java 17 resources section>[Java 17 resources] sections below.

[#runjava17]
== How to run Open Liberty on Java 17

You need a copy of Java 17. If you don't have one, download Java 17 Temurin from link:https://adoptium.net/?variant=openjdk17[adoptium.net].
[WE WON'T NEED THIS SECTION IN THE BLOG; INSTEAD POINT TO "Run your apps using 21.0.0.10"]
You will also need Open Liberty 21.0.0.10, or newer.
If you are using link:https://www.openliberty.io/guides/maven-intro.html[Maven], here are the coordinates:
[source,xml]
io.openliberty openliberty-runtime 21.0.0.10 zip ----
Or for link:https://openliberty.io/guides/gradle-intro.html[Gradle]:
[source,groovy]
dependencies {
libertyRuntime group: 'io.openliberty', name: 'openliberty-runtime', version: '[21.0.0.10,)'
}

Or you can link:https://openliberty.io/downloads/[download OpenLiberty directly here].
[END OF SECTION WE CAN DROP AND INSTEAD POINT TO THE SECTION IN THE BLOG]
There are a number of ways to control the Java executable used by the Open Liberty server. The following list describes the order of precedence:

. JAVA_HOME in ${server.config.dir}/server.env
. JAVA_HOME in ${wlp.install.dir}/etc/server.env
. JAVA_HOME set in the environment
. searching the PATH in the environment

For more information, please visit our link:{url-prefix}/docs/latest/reference/config/server-configuration-overview.html[server configuration documentation].
Happy Java 17 experimenting!

[#java17resources]
== Java 17 resources
For further reading on Java 17, here are a few resources you might find useful:
 - Highlights of new features in Java 17 are found in the link:https://openjdk.java.net/projects/jdk/17/[Java 17 features page]
 - More detailed release information can be seen in the link:https://jdk.java.net/17/release-notes[release notes for Java 17]
 - Peruse the link:https://docs.oracle.com/en/java/javase/17/docs/api/index.html[Javadocs for Java 17]

For migration to Java 17, please check out:
 - link:https://blogs.oracle.com/javamagazine/migrate-to-java-17[Oracle Java 17 migration blog]
 - link:https://docs.oracle.com/en/java/javase/17/migrate/getting-started.html

For Java 17 release roadmaps and availability:
 - link https://adoptium.net/support.html?variant=openjdk17&jvmVariant=hotspot[Adoptium release roadmap]
 - link https://www.oracle.com/java/technologies/java-se-support-roadmap.html[Oracle commercial JDK roadmap]

And finally, for a comprehensive discussion on Java modules with a little hands on practice, read link:https://www.baeldung.com/java-9-modularity[this article from Baeldung].

[#bugs]
== Notable bugs fixed in this release

https://github.com/OpenLiberty/open-liberty/issues/18393

We’ve spent some time fixing bugs. The following sections describe just some of the issues resolved in this release. If you’re interested, here’s the link:https://github.com/OpenLiberty/open-liberty/issues?q=label%3Arelease%3A21.0.0.10+label%3A%22release+bug%22[full list of bugs fixed in 21.0.0.10].

// // // // // // // //
// Above:
// Replace RELEASE_VERSION with the the version number of Open Liberty. e.g. 20.0.0.10
// For this section ask either Tom Evans, Michal Broz or the #openliberty-release-blog channel for Notable bug fixes in this release.
// If the issue on Github is missing any information do not hesitate to message the person that fixed the bug.
// For inspiration about how to write this section look at previous blogs e.g- 20.0.0.10
// // // // // // // //


== Get Open Liberty 21.0.0.10 now

Available through <<run,Maven, Gradle, Docker, and as a downloadable archive>>.
